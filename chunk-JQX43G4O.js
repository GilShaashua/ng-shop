import{Ab as _,Bb as I,Cb as b,Ic as F,K as u,L as p,Mc as P,N as d,O as l,S as f,T as m,ca as g,ea as v,i as c,nb as C,rb as y,ta as $,v as h}from"./chunk-QKHCLIW2.js";var x="cart",U=(()=>{let i=class i{constructor(){this._cart$=new c(null),this.cart$=this._cart$.asObservable(),this.initCartLocalStorage()}initCartLocalStorage(){let t=this._getCart();t?this._saveCart(t):this._saveCart([])}addCartItem(t){let e=this._getCart();if(e)if(e.length){let r=e.findIndex(o=>o.product===t.product);if(r===-1)e.push(t),this._saveCart(e);else{let o=e[r];o.quantity=o.quantity+t.quantity,e.splice(r,1,o),this._saveCart(e)}}else e.push(t),this._saveCart(e)}editCartItem(t,e){let r=this._getCart();if(r&&r.length){let o=r.findIndex(n=>n.product===t);o!==-1&&(r[o].quantity=e,this._saveCart(r))}}deleteCartItem(t){let e=this._getCart();if(e&&e.length){let r=e.findIndex(o=>o.product===t);r!==-1&&(e.splice(r,1),this._saveCart(e))}}clearCart(){this._saveCart([])}get cartCount(){return this._cart$.value?this._cart$.value.length:null}_saveCart(t){localStorage.setItem(x,JSON.stringify(t)),this._cart$.next(t)}_getCart(){return JSON.parse(localStorage.getItem(x))}};i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"});let s=i;return s})();var O=(()=>{let i=class i{constructor(t){this.http=t,this._filterBy$=new c({categories:[],name:""}),this.filterBy$=this._filterBy$.asObservable(),this._products$=new c({products:[],pageCount:0}),this.products$=this._products$.asObservable(),this.apiUrl=P.API_URL}getProducts({currPage:t,pageSize:e}={}){let r=new I;this._filterBy$.value.categories.length&&(r=r.append("categories",this._filterBy$.value.categories.join(","))),this._filterBy$.value.name&&(r=r.append("products",this._filterBy$.value.name)),t&&e&&(r=r.append("currPage",t),r=r.append("pageSize",e)),this.http.get(`${this.apiUrl}products`,{params:r}).pipe(h(1)).subscribe({next:n=>{this._setProducts(n)},error:n=>{console.error("err",n)}})}_setProducts(t){this._products$.next(t)}getProductById(t){return this.http.get(`${this.apiUrl}products/${t}`)}addProduct(t){return this.http.post(`${this.apiUrl}products`,t)}editProduct(t){return this.http.put(`${this.apiUrl}products/${t.get("id")}`,t)}editProductGallery(t,e){return this.http.put(`${this.apiUrl}products/gallery-images/${e}`,t)}deleteProduct(t){return this.http.delete(`${this.apiUrl}products/${t}`)}getProductsCount(){return this.http.get(`${this.apiUrl}products/get/count`)}getFeaturedProducts(t){return this.http.get(`${this.apiUrl}products/get/featured/${t}`)}setFilterBy(t){this._filterBy$.next(t)}getProductStatistics(){return this.http.get(`${this.apiUrl}products/get/statistics`)}};i.\u0275fac=function(e){return new(e||i)(d(b))},i.\u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"});let s=i;return s})();var J=(()=>{class s{autofocus=!1;focused=!1;platformId=l(v);document=l(y);host=l(g);ngAfterContentChecked(){this.autofocus===!1?this.host.nativeElement.removeAttribute("autofocus"):this.host.nativeElement.setAttribute("autofocus",!0),this.focused||this.autoFocus()}ngAfterViewChecked(){this.focused||this.autoFocus()}autoFocus(){_(this.platformId)&&this.autofocus&&setTimeout(()=>{let a=F.getFocusableElements(this.host?.nativeElement);a.length===0&&this.host.nativeElement.focus(),a.length>0&&a[0].focus(),this.focused=!0})}static \u0275fac=function(t){return new(t||s)};static \u0275dir=m({type:s,selectors:[["","pAutoFocus",""]],hostAttrs:[1,"p-element"],inputs:{autofocus:[2,"autofocus","autofocus",C]},standalone:!0,features:[$]})}return s})(),G=(()=>{class s{static \u0275fac=function(t){return new(t||s)};static \u0275mod=f({type:s});static \u0275inj=p({})}return s})();export{U as a,O as b,J as c,G as d};
