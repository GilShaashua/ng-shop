import{Ec as I,Ic as b,K as c,L as l,N as h,P as p,R as f,S as d,ha as m,i as n,mb as $,oa as g,v as u,va as v,wb as y,yb as C,zb as _}from"./chunk-AWVI6DWZ.js";var x="cart",j=(()=>{let i=class i{constructor(){this._cart$=new n(null),this.cart$=this._cart$.asObservable(),this.initCartLocalStorage()}initCartLocalStorage(){let t=this._getCart();t?this._saveCart(t):this._saveCart([])}addCartItem(t){let e=this._getCart();if(e)if(e.length){let s=e.findIndex(o=>o.product===t.product);if(s===-1)e.push(t),this._saveCart(e);else{let o=e[s];o.quantity=o.quantity+t.quantity,e.splice(s,1,o),this._saveCart(e)}}else e.push(t),this._saveCart(e)}editCartItem(t,e){let s=this._getCart();if(s&&s.length){let o=s.findIndex(B=>B.product===t);o!==-1&&(s[o].quantity=e,this._saveCart(s))}}deleteCartItem(t){let e=this._getCart();if(e&&e.length){let s=e.findIndex(o=>o.product===t);s!==-1&&(e.splice(s,1),this._saveCart(e))}}clearCart(){this._saveCart([])}get cartCount(){return this._cart$.value?this._cart$.value.length:null}_saveCart(t){localStorage.setItem(x,JSON.stringify(t)),this._cart$.next(t)}_getCart(){return JSON.parse(localStorage.getItem(x))}};i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();var S=(()=>{let i=class i{constructor(t){this.http=t,this._filterBy$=new n({categories:[],name:""}),this.filterBy$=this._filterBy$.asObservable(),this._products$=new n([]),this.products$=this._products$.asObservable(),this.apiUrl=b.API_URL}getProducts(){let t=new C;this._filterBy$.value.categories.length&&(t=t.append("categories",this._filterBy$.value.categories.join(","))),this._filterBy$.value.name&&(t=t.append("products",this._filterBy$.value.name)),this.http.get(`${this.apiUrl}products`,{params:t}).pipe(u(1)).subscribe({next:s=>{this._setProducts(s)},error:s=>{console.error("err",s)}})}_setProducts(t){this._products$.next(t)}getProductById(t){return this.http.get(`${this.apiUrl}products/${t}`)}addProduct(t){return this.http.post(`${this.apiUrl}products`,t)}editProduct(t){return this.http.put(`${this.apiUrl}products/${t.get("id")}`,t)}editProductGallery(t,e){return this.http.put(`${this.apiUrl}products/gallery-images/${e}`,t)}deleteProduct(t){return this.http.delete(`${this.apiUrl}products/${t}`)}getProductsCount(){return this.http.get(`${this.apiUrl}products/get/count`)}getFeaturedProducts(t){return this.http.get(`${this.apiUrl}products/get/featured/${t}`)}setFilterBy(t){this._filterBy$.next(t)}};i.\u0275fac=function(e){return new(e||i)(h(_))},i.\u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();var R=(()=>{class r{host;constructor(a){this.host=a}autofocus=!1;focused=!1;ngAfterContentChecked(){this.autofocus===!1?this.host.nativeElement.removeAttribute("autofocus"):this.host.nativeElement.setAttribute("autofocus",!0),this.focused||this.autofocus&&setTimeout(()=>{let a=I.getFocusableElements(this.host.nativeElement);a.length===0&&this.host.nativeElement.focus(),a.length>0&&a[0].focus(),this.focused=!0})}static \u0275fac=function(t){return new(t||r)(g(m))};static \u0275dir=d({type:r,selectors:[["","pAutoFocus",""]],hostAttrs:[1,"p-element"],inputs:{autofocus:[p.HasDecoratorInputTransform,"autofocus","autofocus",$]},features:[v]})}return r})(),J=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=f({type:r});static \u0275inj=l({imports:[y]})}return r})();export{j as a,S as b,R as c,J as d};
