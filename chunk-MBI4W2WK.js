import{a as _t,b as ht}from"./chunk-3JZVVKB5.js";import{a as Ct,b as U}from"./chunk-XQT4FNCU.js";import{$ as St,A as Wt,Aa as et,Ab as ne,Ac as Tt,Ba as bt,Bb as re,C as $t,Ca as S,Cb as dt,Da as h,Ea as p,Eb as mt,Ec as ye,F as qt,Fb as ut,G as Y,H as Ut,Ha as Jt,Ia as it,J as zt,Ja as Kt,Jb as P,Ka as wt,Kb as oe,La as H,Lb as ae,M as v,Ma as Q,Mb as gt,N as Gt,Na as O,Nb as J,Oa as y,Ob as j,Pa as F,Pb as se,Qb as W,Rb as ce,S as g,Sa as nt,Sb as le,T as f,Ta as rt,Tb as pe,U as B,Ua as ot,Ub as de,Uc as ve,V as M,Va as Xt,Vb as me,Vc as Ie,Wa as I,Wb as ue,Xb as ge,Y as k,Ya as V,Yb as $,Za as Ft,Zb as fe,a as Rt,aa as G,b as At,bb as at,ca as l,cb as st,da as _,db as D,eb as N,f as Ot,fb as Z,gb as Yt,h as K,i as Vt,k as Dt,ka as Ht,kb as te,l as Nt,la as R,lb as ct,ma as Qt,mb as T,n as jt,na as u,nb as b,oa as C,ob as lt,oc as E,pa as a,pb as ee,qb as pt,rb as x,rc as ft,t as X,ta as A,tc as _e,ua as Zt,ub as ie,uc as he,va as xt,vc as Ce,wa as c,xa as s,xc as q,ya as d,za as tt}from"./chunk-EAZF3ZPW.js";var vt=(()=>{let r=class r{constructor(){this.onAddProduct=new k}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=v({type:r,selectors:[["products-product-item"]],inputs:{product:"product"},outputs:{onAddProduct:"onAddProduct"},standalone:!0,features:[I],decls:11,vars:7,consts:[[1,"product-item"],["alt","product",3,"src","routerLink"],[1,"inner-container"],[1,"name"],[1,"price"],[1,"btn-add-cart",3,"click"],[1,"pi","pi-shopping-cart"]],template:function(i,o){i&1&&(c(0,"li",0),d(1,"img",1),c(2,"div",2)(3,"h4",3),y(4),s(),c(5,"h5",4),y(6),at(7,"currency"),s(),c(8,"button",5),h("click",function(){return o.onAddProduct.emit(o.product.id)}),d(9,"i",6),y(10," Add to cart "),s()()()),i&2&&(l(),it("routerLink","/products/details/",o.product.id,""),a("src",o.product.image,G),l(3),F(o.product.name),l(2),F(st(7,5,o.product.price)))},dependencies:[x,pt,P,ut]});let e=r;return e})();var Se=(()=>{let r=class r{constructor(n){this.http=n,this.apiUrl=ye.API_URL}getCategories(){return this.http.get(`${this.apiUrl}categories`)}getCategoryById(n){return this.http.get(`${this.apiUrl}categories/${n}`)}addCategory(n){return this.http.post(`${this.apiUrl}categories`,n)}editCategory(n){return this.http.put(`${this.apiUrl}categories/${n.id}`,n)}deleteCategory(n){return this.http.delete(`${this.apiUrl}categories/${n}`)}};r.\u0275fac=function(i){return new(i||r)(zt(ie))},r.\u0275prov=Y({token:r,factory:r.\u0275fac,providedIn:"root"});let e=r;return e})();var xe=(()=>{let r=class r{constructor(){this._viewportWidth$=new Vt(window.innerWidth),this.viewportWidth$=this._viewportWidth$.asObservable(),jt(window,"resize").pipe(X(150),Nt(n=>n.target.innerWidth),Wt(window.innerWidth)).subscribe({next:n=>this._viewportWidth$.next(n)})}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=Y({token:r,factory:r.\u0275fac,providedIn:"root"});let e=r;return e})();function Be(e,r){if(e&1){let t=S();c(0,"li")(1,"input",8),ot("ngModelChange",function(i){let o=g(t).$implicit,m=p(2);return rt(m.selectedCategories[o.name.toLowerCase()],i)||(m.selectedCategories[o.name.toLowerCase()]=i),f(i)}),h("change",function(){g(t);let i=p(2);return f(i.onChangeCategory())}),s(),c(2,"label",9),y(3),s()()}if(e&2){let t=r.$implicit,n=p(2);l(),nt("ngModel",n.selectedCategories[t.name.toLowerCase()]),a("name",t.name)("id",t.name),l(),Jt("for",t.name),l(),F(t.name)}}function Me(e,r){e&1&&(c(0,"div",7),d(1,"i",10),s())}function Re(e,r){if(e&1){let t=S();c(0,"products-product-item",12),h("onAddProduct",function(i){g(t);let o=p(4);return f(o.onAddProduct(i))}),s()}if(e&2){let t=r.$implicit;a("product",t)}}function Ae(e,r){if(e&1&&(c(0,"ul"),u(1,Re,1,1,"products-product-item",11),s()),e&2){let t=p(3);l(),a("ngForOf",t.products.products)("ngForTrackBy",t.trackByProduct)}}function Oe(e,r){e&1&&(c(0,"p"),y(1,"No Products found"),s())}function Ve(e,r){if(e&1&&u(0,Ae,2,2,"ul")(1,Oe,2,0,"p"),e&2){let t=p(2);xt(t.products.products.length?0:1)}}function De(e,r){if(e&1&&(c(0,"section",3)(1,"div",4)(2,"h3"),y(3,"Categories"),s(),c(4,"ul"),u(5,Be,4,5,"li",5),s()(),c(6,"div",6)(7,"h3"),y(8,"Products"),s(),u(9,Me,2,0,"div",7)(10,Ve,2,1),s()()),e&2){let t=p();l(5),a("ngForOf",t.categories)("ngForTrackBy",t.trackByCategory),l(4),xt(t.isLoading?9:10)}}function Ne(e,r){e&1&&(c(0,"div",7),d(1,"i",10),s())}var Pt=(()=>{let r=class r{constructor(n,i,o,m,L,It){this.changeDetectorRef=n,this.productsService=i,this.categoriesService=o,this.route=m,this.cartService=L,this.messageService=It,this.selectedCategories={},this.isParamsInited=!1,this.categoryId="",this.isFirstInit=!0}ngOnInit(){this._getFilterBy(),this._getCategories(),this._observeProductsLoading()}_observeProductsLoading(){this.productsService.isNgShopProductsLoading$.subscribe({next:n=>{this.isLoading=n,this.changeDetectorRef.markForCheck()}})}_getFilterBy(){this.filterBySubscription=this.productsService.filterBy$.subscribe({next:n=>{this.filterBy=n}})}_checkParams(){this.route.params.subscribe(n=>Ot(this,null,function*(){if(n.categoryId){let i=yield Dt(this.categoriesService.getCategoryById(n.categoryId));this.selectedCategories[i.name.toLowerCase()]=n.categoryId,this.categoryId=n.categoryId,this.isParamsInited=!0,this.onChangeCategory()}else this.isParamsInited=!0,this._getProducts()}))}_getCategories(){this.categoriesService.getCategories().subscribe({next:n=>{this.categories=n,this.categories.forEach(i=>{this.selectedCategories[i.name.toLowerCase()]=!1}),this.changeDetectorRef.markForCheck(),this._checkParams()},error:n=>{console.error("Cannot get categories",n)}})}_getProducts(){this.productsService.getProducts(),this.isFirstInit&&(this.isFirstInit=!1,this.productsService.products$.subscribe({next:n=>{this.products=n,this.changeDetectorRef.markForCheck()},error:n=>{console.error("Cannot get products",n)}}))}onChangeCategory(){for(let n in this.selectedCategories)if(this.selectedCategories[n]){let i=this.categories.findIndex(o=>o.name.toLowerCase()===n);this.selectedCategories[n]=this.categories[i].id}this.filterBy.categories=[],this.productsService.setFilterBy(this.filterBy);for(let n in this.selectedCategories)this.selectedCategories[n]&&(this.filterBy.categories.push(this.selectedCategories[n]),this.productsService.setFilterBy(this.filterBy));this._getProducts()}onAddProduct(n){let i={product:n,quantity:1};this.cartService.addCartItem(i),this.messageService.add({severity:"success",summary:"Success",detail:"Product added to cart"})}trackByCategory(n,i){return i.id}trackByProduct(n,i){return i.id}ngOnDestroy(){this.productsService.setFilterBy({categories:[],name:""}),this.filterBySubscription?.unsubscribe()}};r.\u0275fac=function(i){return new(i||r)(_(N),_(U),_(Se),_(dt),_(Ct),_(ft))},r.\u0275cmp=v({type:r,selectors:[["products-products-list"]],hostAttrs:[1,"full","component-layout"],standalone:!0,features:[I],decls:4,vars:2,consts:[["loader",""],["class","products-list",4,"ngIf","ngIfElse"],["position","bottom-center"],[1,"products-list"],[1,"categories"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"products"],[1,"loader"],["type","checkbox",3,"ngModelChange","change","ngModel","name","id"],[3,"for"],[1,"pi","pi-spin","pi-spinner"],[3,"product","onAddProduct",4,"ngFor","ngForOf","ngForTrackBy"],[3,"onAddProduct","product"]],template:function(i,o){if(i&1&&(u(0,De,11,3,"section",1)(1,Ne,2,0,"ng-template",null,0,D),d(3,"p-toast",2)),i&2){let m=O(2);a("ngIf",o.isParamsInited&&o.products&&o.categories&&o.isLoading!==void 0)("ngIfElse",m)}},dependencies:[x,T,b,P,$,ae,j,W,vt,ht,_t],changeDetection:0});let e=r;return e})();var Et=(()=>{class e extends q{pathId;ngOnInit(){this.pathId="url(#"+E()+")"}static \u0275fac=(()=>{let t;return function(i){return(t||(t=M(e)))(i||e)}})();static \u0275cmp=v({type:e,selectors:[["BanIcon"]],standalone:!0,features:[R,I],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M7 0C5.61553 0 4.26215 0.410543 3.11101 1.17971C1.95987 1.94888 1.06266 3.04213 0.532846 4.32122C0.00303296 5.6003 -0.13559 7.00776 0.134506 8.36563C0.404603 9.7235 1.07129 10.9708 2.05026 11.9497C3.02922 12.9287 4.2765 13.5954 5.63437 13.8655C6.99224 14.1356 8.3997 13.997 9.67879 13.4672C10.9579 12.9373 12.0511 12.0401 12.8203 10.889C13.5895 9.73785 14 8.38447 14 7C14 5.14348 13.2625 3.36301 11.9497 2.05025C10.637 0.737498 8.85652 0 7 0ZM1.16667 7C1.16549 5.65478 1.63303 4.35118 2.48889 3.31333L10.6867 11.5111C9.83309 12.2112 8.79816 12.6544 7.70243 12.789C6.60669 12.9236 5.49527 12.744 4.49764 12.2713C3.50001 11.7986 2.65724 11.0521 2.06751 10.1188C1.47778 9.18558 1.16537 8.10397 1.16667 7ZM11.5111 10.6867L3.31334 2.48889C4.43144 1.57388 5.84966 1.10701 7.29265 1.1789C8.73565 1.2508 10.1004 1.85633 11.1221 2.87795C12.1437 3.89956 12.7492 5.26435 12.8211 6.70735C12.893 8.15034 12.4261 9.56856 11.5111 10.6867Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(n,i){n&1&&(B(),c(0,"svg",0)(1,"g"),d(2,"path",1),s(),c(3,"defs")(4,"clipPath",2),d(5,"rect",3),s()()()),n&2&&(A(i.getClassNames()),C("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role),l(),C("clip-path",i.pathId),l(3),a("id",i.pathId))},encapsulation:2})}return e})();var Lt=(()=>{class e extends q{pathId;ngOnInit(){this.pathId="url(#"+E()+")"}static \u0275fac=(()=>{let t;return function(i){return(t||(t=M(e)))(i||e)}})();static \u0275cmp=v({type:e,selectors:[["StarIcon"]],standalone:!0,features:[R,I],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M10.9741 13.6721C10.8806 13.6719 10.7886 13.6483 10.7066 13.6033L7.00002 11.6545L3.29345 13.6033C3.19926 13.6539 3.09281 13.6771 2.98612 13.6703C2.87943 13.6636 2.77676 13.6271 2.6897 13.5651C2.60277 13.5014 2.53529 13.4147 2.4948 13.3148C2.45431 13.215 2.44241 13.1058 2.46042 12.9995L3.17881 8.87264L0.167699 5.95324C0.0922333 5.8777 0.039368 5.78258 0.0150625 5.67861C-0.00924303 5.57463 -0.00402231 5.46594 0.030136 5.36477C0.0621323 5.26323 0.122141 5.17278 0.203259 5.10383C0.284377 5.03488 0.383311 4.99023 0.488681 4.97501L4.63087 4.37126L6.48797 0.618832C6.54083 0.530159 6.61581 0.456732 6.70556 0.405741C6.79532 0.35475 6.89678 0.327942 7.00002 0.327942C7.10325 0.327942 7.20471 0.35475 7.29447 0.405741C7.38422 0.456732 7.4592 0.530159 7.51206 0.618832L9.36916 4.37126L13.5114 4.97501C13.6167 4.99023 13.7157 5.03488 13.7968 5.10383C13.8779 5.17278 13.9379 5.26323 13.9699 5.36477C14.0041 5.46594 14.0093 5.57463 13.985 5.67861C13.9607 5.78258 13.9078 5.8777 13.8323 5.95324L10.8212 8.87264L11.532 12.9995C11.55 13.1058 11.5381 13.215 11.4976 13.3148C11.4571 13.4147 11.3896 13.5014 11.3027 13.5651C11.2059 13.632 11.0917 13.6692 10.9741 13.6721ZM7.00002 10.4393C7.09251 10.4404 7.18371 10.4613 7.2675 10.5005L10.2098 12.029L9.65193 8.75036C9.6368 8.6584 9.64343 8.56418 9.6713 8.47526C9.69918 8.38633 9.74751 8.30518 9.81242 8.23832L12.1969 5.94559L8.90298 5.45648C8.81188 5.44198 8.72555 5.406 8.65113 5.35152C8.57671 5.29703 8.51633 5.2256 8.475 5.14314L7.00002 2.1626L5.52503 5.15078C5.4837 5.23324 5.42332 5.30467 5.3489 5.35916C5.27448 5.41365 5.18815 5.44963 5.09705 5.46412L1.80318 5.94559L4.18761 8.23832C4.25252 8.30518 4.30085 8.38633 4.32873 8.47526C4.3566 8.56418 4.36323 8.6584 4.3481 8.75036L3.7902 12.0519L6.73253 10.5234C6.81451 10.4762 6.9058 10.4475 7.00002 10.4393Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(n,i){n&1&&(B(),c(0,"svg",0)(1,"g"),d(2,"path",1),s(),c(3,"defs")(4,"clipPath",2),d(5,"rect",3),s()()()),n&2&&(A(i.getClassNames()),C("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role),l(),C("clip-path",i.pathId),l(3),a("id",i.pathId))},encapsulation:2})}return e})();var Bt=(()=>{class e extends q{pathId;ngOnInit(){this.pathId="url(#"+E()+")"}static \u0275fac=(()=>{let t;return function(i){return(t||(t=M(e)))(i||e)}})();static \u0275cmp=v({type:e,selectors:[["StarFillIcon"]],standalone:!0,features:[R,I],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M13.9718 5.36453C13.9398 5.26298 13.8798 5.17252 13.7986 5.10356C13.7175 5.0346 13.6186 4.98994 13.5132 4.97472L9.37043 4.37088L7.51307 0.617955C7.46021 0.529271 7.38522 0.455834 7.29545 0.404836C7.20568 0.353838 7.1042 0.327026 7.00096 0.327026C6.89771 0.327026 6.79624 0.353838 6.70647 0.404836C6.6167 0.455834 6.54171 0.529271 6.48885 0.617955L4.63149 4.37088L0.488746 4.97472C0.383363 4.98994 0.284416 5.0346 0.203286 5.10356C0.122157 5.17252 0.0621407 5.26298 0.03014 5.36453C-0.00402286 5.46571 -0.00924428 5.57442 0.0150645 5.67841C0.0393733 5.7824 0.0922457 5.87753 0.167722 5.95308L3.17924 8.87287L2.4684 13.0003C2.45038 13.1066 2.46229 13.2158 2.50278 13.3157C2.54328 13.4156 2.61077 13.5022 2.6977 13.5659C2.78477 13.628 2.88746 13.6644 2.99416 13.6712C3.10087 13.678 3.20733 13.6547 3.30153 13.6042L7.00096 11.6551L10.708 13.6042C10.79 13.6491 10.882 13.6728 10.9755 13.673C11.0958 13.6716 11.2129 13.6343 11.3119 13.5659C11.3988 13.5022 11.4663 13.4156 11.5068 13.3157C11.5473 13.2158 11.5592 13.1066 11.5412 13.0003L10.8227 8.87287L13.8266 5.95308C13.9033 5.87835 13.9577 5.7836 13.9833 5.67957C14.009 5.57554 14.005 5.4664 13.9718 5.36453Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(n,i){n&1&&(B(),c(0,"svg",0)(1,"g"),d(2,"path",1),s(),c(3,"defs")(4,"clipPath",2),d(5,"rect",3),s()()()),n&2&&(A(i.getClassNames()),C("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role),l(),C("clip-path",i.pathId),l(3),a("id",i.pathId))},encapsulation:2})}return e})();var je=(e,r)=>({"p-readonly":e,"p-disabled":r}),We=e=>({"p-focus":e}),$e=(e,r)=>({"p-rating-item-active":e,"p-focus":r});function qe(e,r){if(e&1&&d(0,"span",10),e&2){let t=p(3);a("ngClass",t.iconCancelClass)("ngStyle",t.iconCancelStyle)}}function Ue(e,r){if(e&1&&d(0,"BanIcon",11),e&2){let t=p(3);a("styleClass","p-rating-icon p-rating-cancel")("ngStyle",t.iconCancelStyle),C("data-pc-section","cancelIcon")}}function ze(e,r){if(e&1){let t=S();c(0,"div",5),h("click",function(i){g(t);let o=p(2);return f(o.onOptionClick(i,0))}),c(1,"span",6)(2,"input",7),h("focus",function(i){g(t);let o=p(2);return f(o.onInputFocus(i,0))})("blur",function(i){g(t);let o=p(2);return f(o.onInputBlur(i))})("change",function(i){g(t);let o=p(2);return f(o.onChange(i,0))}),s()(),u(3,qe,1,2,"span",8)(4,Ue,1,3,"BanIcon",9),s()}if(e&2){let t=p(2);a("ngClass",V(11,We,t.focusedOptionIndex()===0&&t.isFocusVisibleItem)),C("data-pc-section","cancelItem"),l(),C("data-p-hidden-accessible",!0),l(),a("name",t.name)("checked",t.value===0)("disabled",t.disabled)("readonly",t.readonly)("autofocus",t.autofocus),C("aria-label",t.cancelAriaLabel()),l(),a("ngIf",t.iconCancelClass),l(),a("ngIf",!t.iconCancelClass)}}function Ge(e,r){if(e&1&&d(0,"span",16),e&2){let t=p(4);a("ngStyle",t.iconOffStyle)("ngClass",t.iconOffClass),C("data-pc-section","offIcon")}}function He(e,r){if(e&1&&d(0,"StarIcon",17),e&2){let t=p(4);a("ngStyle",t.iconOffStyle)("styleClass","p-rating-icon"),C("data-pc-section","offIcon")}}function Qe(e,r){if(e&1&&(tt(0),u(1,Ge,1,3,"span",14)(2,He,1,3,"StarIcon",15),et()),e&2){let t=p(3);l(),a("ngIf",t.iconOffClass),l(),a("ngIf",!t.iconOffClass)}}function Ze(e,r){if(e&1&&d(0,"span",19),e&2){let t=p(4);a("ngStyle",t.iconOnStyle)("ngClass",t.iconOnClass),C("data-pc-section","onIcon")}}function Je(e,r){if(e&1&&d(0,"StarFillIcon",17),e&2){let t=p(4);a("ngStyle",t.iconOnStyle)("styleClass","p-rating-icon p-rating-icon-active"),C("data-pc-section","onIcon")}}function Ke(e,r){if(e&1&&(tt(0),u(1,Ze,1,3,"span",18)(2,Je,1,3,"StarFillIcon",15),et()),e&2){let t=p(3);l(),a("ngIf",t.iconOnClass),l(),a("ngIf",!t.iconOnClass)}}function Xe(e,r){if(e&1){let t=S();c(0,"div",12),h("click",function(i){let o=g(t).$implicit,m=p(2);return f(m.onOptionClick(i,o+1))}),c(1,"span",6)(2,"input",7),h("focus",function(i){let o=g(t).$implicit,m=p(2);return f(m.onInputFocus(i,o+1))})("blur",function(i){g(t);let o=p(2);return f(o.onInputBlur(i))})("change",function(i){let o=g(t).$implicit,m=p(2);return f(m.onChange(i,o+1))}),s()(),u(3,Qe,3,2,"ng-container",13)(4,Ke,3,2,"ng-container",13),s()}if(e&2){let t=r.$implicit,n=r.index,i=p(2);a("ngClass",Ft(10,$e,t+1<=i.value,t+1===i.focusedOptionIndex()&&i.isFocusVisibleItem)),l(),C("data-p-hidden-accessible",!0),l(),a("name",i.name)("checked",i.value===0)("disabled",i.disabled)("readonly",i.readonly)("autofocus",i.autofocus),C("aria-label",i.starAriaLabel(t+1)),l(),a("ngIf",!i.value||n>=i.value),l(),a("ngIf",i.value&&n<i.value)}}function Ye(e,r){if(e&1&&(tt(0),u(1,ze,5,13,"div",3)(2,Xe,5,13,"ng-template",4),et()),e&2){let t=p();l(),a("ngIf",t.cancel),l(),a("ngForOf",t.starsArray)}}function ti(e,r){e&1&&bt(0)}function ei(e,r){if(e&1){let t=S();c(0,"span",22),h("click",function(i){g(t);let o=p(2);return f(o.onOptionClick(i,0))}),u(1,ti,1,0,"ng-container",23),s()}if(e&2){let t=p(2);a("ngStyle",t.iconCancelStyle),C("data-pc-section","cancelIcon"),l(),a("ngTemplateOutlet",t.cancelIconTemplate)}}function ii(e,r){e&1&&bt(0)}function ni(e,r){if(e&1){let t=S();c(0,"span",24),h("click",function(i){let o=g(t).$implicit,m=p(2);return f(m.onOptionClick(i,o+1))}),u(1,ii,1,0,"ng-container",23),s()}if(e&2){let t=r.index,n=p(2);C("data-pc-section","onIcon"),l(),a("ngTemplateOutlet",n.getIconTemplate(t))}}function ri(e,r){if(e&1&&u(0,ei,2,3,"span",20)(1,ni,2,2,"span",21),e&2){let t=p();a("ngIf",t.cancel),l(),a("ngForOf",t.starsArray)}}var oi={provide:oe,useExisting:qt(()=>Mt),multi:!0},Mt=(()=>{class e{cd;config;disabled;readonly;stars=5;cancel=!0;iconOnClass;iconOnStyle;iconOffClass;iconOffStyle;iconCancelClass;iconCancelStyle;autofocus;onRate=new k;onCancel=new k;onFocus=new k;onBlur=new k;templates;onIconTemplate;offIconTemplate;cancelIconTemplate;value;onModelChange=()=>{};onModelTouched=()=>{};starsArray;isFocusVisibleItem=!0;focusedOptionIndex=Ht(-1);name;constructor(t,n){this.cd=t,this.config=n}ngOnInit(){this.name=this.name||E(),this.starsArray=[];for(let t=0;t<this.stars;t++)this.starsArray[t]=t}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"onicon":this.onIconTemplate=t.template;break;case"officon":this.offIconTemplate=t.template;break;case"cancelicon":this.cancelIconTemplate=t.template;break}})}onOptionClick(t,n){if(!this.readonly&&!this.disabled){this.onOptionSelect(t,n),this.isFocusVisibleItem=!1;let i=Tt.getFirstFocusableElement(t.currentTarget,"");i&&Tt.focus(i)}}onOptionSelect(t,n){this.focusedOptionIndex.set(n),this.updateModel(t,n||null)}onChange(t,n){this.onOptionSelect(t,n),this.isFocusVisibleItem=!0}onInputBlur(t){this.focusedOptionIndex.set(-1),this.onBlur.emit(t)}onInputFocus(t,n){this.focusedOptionIndex.set(n),this.onFocus.emit(t)}updateModel(t,n){this.value=n,this.onModelChange(this.value),this.onModelTouched(),n?this.onRate.emit({originalEvent:t,value:n}):this.onCancel.emit()}cancelAriaLabel(){return this.config.translation.clear}starAriaLabel(t){return t===1?this.config.translation.aria.star:this.config.translation.aria.stars.replace(/{star}/g,t)}getIconTemplate(t){return!this.value||t>=this.value?this.offIconTemplate:this.onIconTemplate}writeValue(t){this.value=t,this.cd.detectChanges()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}get isCustomIcon(){return this.templates&&this.templates.length>0}static \u0275fac=function(n){return new(n||e)(_(N),_(_e))};static \u0275cmp=v({type:e,selectors:[["p-rating"]],contentQueries:function(n,i,o){if(n&1&&Kt(o,he,4),n&2){let m;H(m=Q())&&(i.templates=m)}},hostAttrs:[1,"p-element"],inputs:{disabled:[2,"disabled","disabled",Z],readonly:[2,"readonly","readonly",Z],stars:[2,"stars","stars",Yt],cancel:[2,"cancel","cancel",Z],iconOnClass:"iconOnClass",iconOnStyle:"iconOnStyle",iconOffClass:"iconOffClass",iconOffStyle:"iconOffStyle",iconCancelClass:"iconCancelClass",iconCancelStyle:"iconCancelStyle",autofocus:[2,"autofocus","autofocus",Z]},outputs:{onRate:"onRate",onCancel:"onCancel",onFocus:"onFocus",onBlur:"onBlur"},features:[Xt([oi]),Qt],decls:4,vars:8,consts:[["customTemplate",""],[1,"p-rating",3,"ngClass"],[4,"ngIf","ngIfElse"],["class","p-rating-item p-rating-cancel-item",3,"ngClass","click",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-rating-item","p-rating-cancel-item",3,"click","ngClass"],[1,"p-hidden-accessible"],["type","radio","value","0","pAutoFocus","",3,"focus","blur","change","name","checked","disabled","readonly","autofocus"],["class","p-rating-icon p-rating-cancel",3,"ngClass","ngStyle",4,"ngIf"],[3,"styleClass","ngStyle",4,"ngIf"],[1,"p-rating-icon","p-rating-cancel",3,"ngClass","ngStyle"],[3,"styleClass","ngStyle"],[1,"p-rating-item",3,"click","ngClass"],[4,"ngIf"],["class","p-rating-icon",3,"ngStyle","ngClass",4,"ngIf"],[3,"ngStyle","styleClass",4,"ngIf"],[1,"p-rating-icon",3,"ngStyle","ngClass"],[3,"ngStyle","styleClass"],["class","p-rating-icon p-rating-icon-active",3,"ngStyle","ngClass",4,"ngIf"],[1,"p-rating-icon","p-rating-icon-active",3,"ngStyle","ngClass"],["class","p-rating-icon p-rating-cancel",3,"ngStyle","click",4,"ngIf"],["class","p-rating-icon",3,"click",4,"ngFor","ngForOf"],[1,"p-rating-icon","p-rating-cancel",3,"click","ngStyle"],[4,"ngTemplateOutlet"],[1,"p-rating-icon",3,"click"]],template:function(n,i){if(n&1&&(c(0,"div",1),u(1,Ye,3,2,"ng-container",2)(2,ri,2,2,"ng-template",null,0,D),s()),n&2){let o=O(3);a("ngClass",Ft(5,je,i.readonly,i.disabled)),C("data-pc-name","rating")("data-pc-section","root"),l(),a("ngIf",!i.isCustomIcon)("ngIfElse",o)}},dependencies:()=>[ct,T,b,ee,lt,ve,Bt,Lt,Et],styles:[`@layer primeng{.p-rating{display:inline-flex;position:relative;align-items:center}.p-rating-icon{cursor:pointer}.p-rating.p-rating-readonly .p-rating-icon{cursor:default}}
`],encapsulation:2,changeDetection:0})}return e})(),Fe=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=Gt({type:e});static \u0275inj=Ut({imports:[x,Ie,Bt,Lt,Et,Ce]})}return e})();var si=["imagesContainer"],ci=["imagesInnerContainer"],li=e=>({active:e});function pi(e,r){if(e&1){let t=S();c(0,"button",12),h("click",function(){g(t);let i=p(2);return f(i.onClickArrowBtn("left"))}),d(1,"i",13),s()}}function di(e,r){if(e&1){let t=S();c(0,"button",14),h("click",function(){g(t);let i=p(2);return f(i.onClickArrowBtn("right"))}),d(1,"i",15),s()}}function mi(e,r){if(e&1){let t=S();c(0,"img",16),h("click",function(){let i=g(t).index,o=p(2);return f(o.onSelectImage(i))}),s()}if(e&2){let t=r.$implicit,n=p(2);a("ngClass",V(2,li,n.activeImage===t))("src",t,G)}}function ui(e,r){if(e&1&&(c(0,"div",3)(1,"div",4),d(2,"img",5),s(),c(3,"div",6),u(4,pi,2,0,"button",7)(5,di,2,0,"button",8),c(6,"div",9,0)(8,"div",10,1),u(10,mi,1,4,"img",11),s()()()()),e&2){let t=p();l(2),a("src",t.selectedImage,G),l(2),a("ngIf",t.isLeftArrowShown),l(),a("ngIf",t.isRightArrowShown),l(5),a("ngForOf",t.images)("ngForTrackBy",t.trackByImage)}}var Te=(()=>{let r=class r{constructor(n,i){this.viewportSizeService=n,this.changeDetectorRef=i,this.selectedImage="",this.isLeftArrowShown=!1,this.isRightArrowShown=!0,this.imagesContainerScrollLeft=0,this.activeImage="",this.subscriptionSubject=new K}ngOnInit(){this.images&&(this.selectedImage=this.images[0],this.activeImage=this.images?.[0])}ngAfterViewInit(){this.viewportSizeService.viewportWidth$.pipe($t(this.subscriptionSubject)).subscribe({next:()=>{this.containerWidth=this.elImages.nativeElement.offsetWidth,this.scrollWidth=this.elImages.nativeElement.scrollWidth,this.scrollAmount=this.elImages.nativeElement.scrollWidth*.15,this.imagesContainerScrollLeft=0,this.isLeftArrowShown=!1,this.isRightArrowShown=!0,this.images&&(this.selectedImage=this.images[0],this.activeImage=this.images[0],this.elImages.nativeElement.scrollLeft=0),this.elImagesInner.nativeElement.offsetWidth<this.elImages.nativeElement.offsetWidth&&(this.isRightArrowShown=!1,this.isLeftArrowShown=!1),this.changeDetectorRef.markForCheck()}})}onSelectImage(n){this.images&&(this.selectedImage=this.images[n],this.activeImage=this.images[n])}onClickArrowBtn(n){n==="left"?(this.elImages.nativeElement.scrollLeft-=this.scrollAmount,this.imagesContainerScrollLeft-=this.scrollAmount,this.imagesContainerScrollLeft===0&&(this.isLeftArrowShown=!1,this.isRightArrowShown=!0),this.imagesContainerScrollLeft>0&&(this.isRightArrowShown=!0)):n==="right"&&(this.elImages.nativeElement.scrollLeft+=this.scrollAmount,this.imagesContainerScrollLeft+=this.scrollAmount,this.imagesContainerScrollLeft>=this.scrollWidth-this.containerWidth&&(this.isRightArrowShown=!1),this.imagesContainerScrollLeft>0&&(this.isLeftArrowShown=!0))}trackByImage(n,i){return i}ngOnDestroy(){this.subscriptionSubject.next(null),this.subscriptionSubject.complete()}};r.\u0275fac=function(i){return new(i||r)(_(xe),_(N))},r.\u0275cmp=v({type:r,selectors:[["ui-gallery"]],viewQuery:function(i,o){if(i&1&&(wt(si,5),wt(ci,5)),i&2){let m;H(m=Q())&&(o.elImages=m.first),H(m=Q())&&(o.elImagesInner=m.first)}},hostAttrs:[1,"host-gallery"],inputs:{images:"images"},standalone:!0,features:[I],decls:1,vars:1,consts:[["imagesContainer",""],["imagesInnerContainer",""],["class","gallery",4,"ngIf"],[1,"gallery"],[1,"main-image"],["alt","main product",3,"src"],[1,"images-container"],["class","btn-left",3,"click",4,"ngIf"],["class","btn-right",3,"click",4,"ngIf"],[1,"images"],[1,"inner-container"],["alt","image",3,"ngClass","src","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"btn-left",3,"click"],[1,"pi","pi-angle-left"],[1,"btn-right",3,"click"],[1,"pi","pi-angle-right"],["alt","image",3,"click","ngClass","src"]],template:function(i,o){i&1&&u(0,ui,11,5,"div",2),i&2&&a("ngIf",o.images)},dependencies:[x,ct,T,b],changeDetection:0});let e=r;return e})();function gi(e,r){e&1&&(c(0,"small"),y(1,"Quantity is required!"),s())}function fi(e,r){e&1&&(c(0,"small"),y(1,"Minimum 1"),s())}function _i(e,r){e&1&&(c(0,"small"),y(1,"Maximum 99"),s())}function hi(e,r){if(e&1){let t=S();c(0,"section",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"button",7),h("click",function(){g(t);let i=p();return f(i.goBack())}),d(5,"i",8),s()(),d(6,"ui-gallery",9),s(),c(7,"div",10)(8,"div",11)(9,"h2"),y(10),s(),c(11,"button",7),h("click",function(){g(t);let i=p();return f(i.goBack())}),d(12,"i",8),s()(),d(13,"div",12)(14,"p-rating",13),c(15,"h4",14),y(16),at(17,"currency"),s(),c(18,"form",15)(19,"div",6)(20,"label",16),y(21,"Quantity"),s(),d(22,"input",17),s(),u(23,gi,2,0,"small",18)(24,fi,2,0,"small",18)(25,_i,2,0,"small",18),s(),c(26,"div",19)(27,"button"),d(28,"i",20),y(29," Buy Now"),s(),c(30,"button",21),h("click",function(){g(t);let i=p();return f(i.onAddCartItem())}),d(31,"i",22),y(32," Add to Cart "),s()()()(),c(33,"div",23),d(34,"div",24),s()()}if(e&2){let t=p();l(6),a("images",t.product.images),l(4),F(t.product.name),l(3),a("innerHTML",t.product.description,St),l(),a("ngModel",t.product.rating)("readonly",!0)("cancel",!1),l(2),F(st(17,12,t.product.price)),l(2),a("formGroup",t.productItemRF),l(5),a("ngIf",t.controls.quantity.hasError("required")),l(),a("ngIf",t.controls.quantity.hasError("min")),l(),a("ngIf",t.controls.quantity.hasError("max")),l(9),a("innerHTML",t.product.richDescription,St)}}function Ci(e,r){e&1&&(c(0,"div",25),d(1,"i",26),s())}var ke=(()=>{let r=class r{constructor(n,i,o,m,L,It,Pe,Ee){this.productsService=n,this.route=i,this.sanitizer=o,this.location=m,this.router=L,this.cartService=It,this.formBuilder=Pe,this.messageService=Ee,this.productItemRF=this.formBuilder.group({quantity:[1,[J.required,J.max(100),J.min(1)]],product:[null,[J.required]]}),this.isSanitizerProccessing=!0}ngOnInit(){this._getParams()}goBack(){this.location.back()}onAddCartItem(){if(this.productItemRF.invalid)return;let n={product:this.productItemRF.value.product?.id,quantity:this.productItemRF.value.quantity};this.cartService.addCartItem(n),this.messageService.add({severity:"success",summary:"Success",detail:"Product added to cart"})}_sanitizer(){this.product.description=this.sanitizer.bypassSecurityTrustHtml(this.product.description),this.product.richDescription=this.sanitizer.bypassSecurityTrustHtml(this.product.richDescription),this.isSanitizerProccessing=!1}_getParams(){this.route.params.subscribe({next:n=>{n.productId&&this._getProductById(n.productId)},error:n=>{console.error("Cannot get params",n)}})}_getProductById(n){this.productsService.getProductById(n).subscribe({next:i=>{this.product=i,this.controls.product.patchValue(i),this._sanitizer()},error:i=>{console.error("Cannot get product",i),this.router.navigateByUrl("/")}})}get controls(){return this.productItemRF.controls}};r.\u0275fac=function(i){return new(i||r)(_(U),_(dt),_(ne),_(te),_(mt),_(Ct),_(ge),_(ft))},r.\u0275cmp=v({type:r,selectors:[["products-product-details"]],standalone:!0,features:[I],decls:4,vars:2,consts:[["loader",""],["class","product-details",4,"ngIf","ngIfElse"],["position","bottom-center"],[1,"product-details"],[1,"main-details"],[1,"gallery"],[1,"inner-container"],["title","Back",1,"btn-back",3,"click"],[1,"pi","pi-angle-right"],[3,"images"],[1,"content"],[1,"product-name-btn-back"],[1,"description",3,"innerHTML"],[3,"ngModel","readonly","cancel"],[1,"price"],[1,"quantity",3,"formGroup"],["for","quantity"],["formControlName","quantity","type","number","name","quantity","id","quantity","min","1","max","99"],[4,"ngIf"],[1,"buttons"],[1,"pi","pi-shopping-bag"],[3,"click"],[1,"pi","pi-shopping-cart"],[1,"other-content"],[1,"rich-description",3,"innerHTML"],[1,"loader"],[1,"pi","pi-spin","pi-spinner"]],template:function(i,o){if(i&1&&(u(0,hi,35,14,"section",1)(1,Ci,2,0,"ng-template",null,0,D),d(3,"p-toast",2)),i&2){let m=O(2);a("ngIf",o.product&&!o.isSanitizerProccessing)("ngIfElse",m)}},dependencies:[x,b,pt,P,$,ce,gt,le,j,se,ue,me,W,fe,pe,de,Fe,Mt,Te,ht,_t]});let e=r;return e})();var Vn=[{path:"",component:Pt,title:"Products | ngShop"},{path:":categoryId",component:Pt,title:"Products | ngShop"},{path:"details/:productId",component:ke,title:"Product Details | ngShop"}];var yi=e=>({backgroundColor:e});function vi(e,r){if(e&1&&(c(0,"div",4),d(1,"i"),c(2,"p"),y(3),s()()),e&2){let t=r.$implicit;it("routerLink","products/",t.id,""),a("ngStyle",V(7,yi,t.color)),l(),Zt("pi pi-",t.icon,""),l(2),F(t.name)}}function Ii(e,r){if(e&1&&(c(0,"section",1)(1,"h2"),y(2,"Categories"),s(),c(3,"div",2),u(4,vi,4,9,"div",3),s()()),e&2){let t=p();l(4),a("ngForOf",t.categories)("ngForTrackBy",t.trackByFn)}}var Wn=(()=>{let r=class r{constructor(){}trackByFn(n,i){return i.id}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=v({type:r,selectors:[["products-categories-banner"]],hostAttrs:[1,"component-layout","categories-banner-host"],inputs:{categories:"categories"},standalone:!0,features:[I],decls:1,vars:1,consts:[["class","categories-banner",4,"ngIf"],[1,"categories-banner"],[1,"categories-list"],["class","category",3,"ngStyle","routerLink",4,"ngFor","ngForOf","ngForTrackBy"],[1,"category",3,"ngStyle","routerLink"]],template:function(i,o){i&1&&u(0,Ii,5,2,"section",0),i&2&&a("ngIf",o.categories)},dependencies:[x,T,b,lt,P,ut],changeDetection:0});let e=r;return e})();var Qn=(()=>{let r=class r{constructor(n,i){this.router=n,this.productsService=i,this.routePath="",this.searchTerms=new K}ngOnInit(){this._observeRouterUrl(),this._getFilterBy(),this.searchTermsSubscription=this.searchTerms.pipe(X(500)).subscribe(()=>{this.productsService.setFilterBy(this.filterBy),this.productsService.getProducts()})}_observeRouterUrl(){this.routerUrlSubscription=this.router.events.subscribe(n=>{n instanceof re&&(this.routePath=this.router.url,this.routePath.startsWith("/products")||this.productsService.setFilterBy(At(Rt({},this.filterBy),{name:""})))})}_getFilterBy(){this.filterBySubscription=this.productsService.filterBy$.subscribe({next:n=>{this.filterBy=n}})}onInputProducts(){this.routePath!=="/products"&&this.router.navigate(["/products"]),this.searchTerms.next(this.filterBy.name)}ngOnDestroy(){this.routerUrlSubscription?.unsubscribe(),this.filterBySubscription?.unsubscribe(),this.searchTermsSubscription?.unsubscribe()}};r.\u0275fac=function(i){return new(i||r)(_(mt),_(U))},r.\u0275cmp=v({type:r,selectors:[["ngshop-products-search"]],hostAttrs:[1,"products-search-host"],standalone:!0,features:[I],decls:4,vars:1,consts:[[1,"search-input"],["for","search"],[1,"pi","pi-search"],["type","text","name","search","id","search","placeholder","Search products",3,"ngModelChange","input","ngModel"]],template:function(i,o){i&1&&(c(0,"div",0)(1,"label",1),d(2,"i",2),s(),c(3,"input",3),ot("ngModelChange",function(L){return rt(o.filterBy.name,L)||(o.filterBy.name=L),L}),h("input",function(){return o.onInputProducts()}),s()()),i&2&&(l(3),nt("ngModel",o.filterBy.name))},dependencies:[x,$,gt,j,W]});let e=r;return e})();function Si(e,r){if(e&1){let t=S();c(0,"products-product-item",4),h("onAddProduct",function(i){g(t);let o=p(2);return f(o.onAddProduct.emit(i))}),s()}if(e&2){let t=r.$implicit;a("product",t)}}function xi(e,r){if(e&1&&(c(0,"section",1)(1,"h2"),y(2,"Featured Products"),s(),c(3,"ul",2),u(4,Si,1,1,"products-product-item",3),s()()),e&2){let t=p();l(4),a("ngForOf",t.featuredProducts)("ngForTrackBy",t.trackByFn)}}var rr=(()=>{let r=class r{constructor(){this.onAddProduct=new k}trackByFn(n,i){return i.id}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=v({type:r,selectors:[["products-featured-products"]],hostAttrs:[1,"component-layout","featured-products-host"],inputs:{featuredProducts:"featuredProducts"},outputs:{onAddProduct:"onAddProduct"},standalone:!0,features:[I],decls:1,vars:1,consts:[["class","featured-products",4,"ngIf"],[1,"featured-products"],[1,"featured-products-list"],[3,"product","onAddProduct",4,"ngFor","ngForOf","ngForTrackBy"],[3,"onAddProduct","product"]],template:function(i,o){i&1&&u(0,xi,5,2,"section",0),i&2&&a("ngIf",o.featuredProducts)},dependencies:[x,T,b,vt],changeDetection:0});let e=r;return e})();export{Se as a,vt as b,Vn as c,Wn as d,Qn as e,rr as f};
