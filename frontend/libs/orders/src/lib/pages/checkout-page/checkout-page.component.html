<section class="checkout-page" *ngIf="countries && cart; else loader">
    <h1>Checkout</h1>

    <div class="inner-container">
        <form [formGroup]="form">
            <div class="input name">
                <label for="name">Name</label>

                <input
                    formControlName="name"
                    type="text"
                    name="name"
                    id="name"
                />

                <small
                    *ngIf="
                        controlsForm['name'].hasError('required') && isSubmitted
                    "
                    class="p-error"
                    >Name is requried!</small
                >
            </div>

            <div class="input email">
                <label for="email">Email</label>

                <input
                    formControlName="email"
                    type="email"
                    name="email"
                    id="email"
                />

                <small
                    *ngIf="
                        controlsForm['email'].hasError('required') &&
                        isSubmitted
                    "
                    class="p-error"
                    >Email is requried!</small
                >

                <small
                    *ngIf="
                        controlsForm['email'].hasError('email') && isSubmitted
                    "
                    class="p-error"
                    >Must be example&#64;example.com</small
                >
            </div>

            <div class="input phone">
                <label for="phone">Phone</label>

                <input
                    formControlName="phone"
                    type="tel"
                    name="phone"
                    id="phone"
                />

                <small
                    *ngIf="
                        controlsForm['phone'].hasError('required') &&
                        isSubmitted
                    "
                    class="p-error"
                    >Phone is requried!</small
                >
            </div>

            <div class="input street">
                <label for="street">Street</label>

                <input
                    formControlName="street"
                    type="text"
                    name="street"
                    id="street"
                />

                <small
                    *ngIf="
                        controlsForm['street'].hasError('required') &&
                        isSubmitted
                    "
                    class="p-error"
                    >Street is requried!</small
                >
            </div>

            <div class="input apartment">
                <label for="apartment">Apartment</label>

                <input
                    formControlName="apartment"
                    type="text"
                    name="apartment"
                    id="apartment"
                />

                <small
                    *ngIf="
                        controlsForm['apartment'].hasError('required') &&
                        isSubmitted
                    "
                    class="p-error"
                    >Apartment is requried!</small
                >
            </div>

            <div class="input zip">
                <label for="zip">Zip</label>

                <input formControlName="zip" type="text" name="zip" id="zip" />

                <small
                    *ngIf="
                        controlsForm['zip'].hasError('required') && isSubmitted
                    "
                    class="p-error"
                    >Zip is requried!</small
                >
            </div>

            <div class="input city">
                <label for="city">City</label>

                <input
                    formControlName="city"
                    type="text"
                    name="city"
                    id="city"
                />

                <small
                    *ngIf="
                        controlsForm['city'].hasError('required') && isSubmitted
                    "
                    class="p-error"
                    >City is requried!</small
                >
            </div>

            <div class="country">
                <label for="country">Country</label>

                <p-dropdown
                    formControlName="country"
                    [options]="countries"
                    optionLabel="name"
                    optionValue="id"
                    [filter]="true"
                    filterBy="name"
                    placeholder="Select a country"
                ></p-dropdown>

                <small
                    *ngIf="
                        controlsForm['country'].hasError('required') &&
                        isSubmitted
                    "
                    class="p-error"
                    >Country is requried!</small
                >
            </div>
        </form>

        <div class="order-summary">
            <h2>Order Summary</h2>

            <div class="items-price">
                <span>Items Price</span>
                <span>{{ totalPrice | currency }}</span>
            </div>

            <div class="packing-shipping">
                <span>Packing & Shipping</span>
                <span>Free</span>
            </div>

            <div class="total-price">
                <span>Total Price</span>
                <span>{{ totalPrice | currency }}</span>
            </div>

            <button class="btn-place-order" (click)="onPlaceOrder()">
                <span> Place Order</span>
                <i *ngIf="isProccessing" class="pi pi-spin pi-spinner"></i>
            </button>
        </div>
    </div>
</section>

<ng-template #loader>
    <div class="loader">
        <i class="pi pi-spin pi-spinner"></i>
    </div>
</ng-template>
