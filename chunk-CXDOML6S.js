import{Cc as g,E as p,H as h,Rc as l,i as n,rb as a,sb as d,t as u}from"./chunk-QIF64ZIK.js";var f="cart",v=(()=>{let i=class i{constructor(){this._cart$=new n(null),this.cart$=this._cart$.asObservable(),this.initCartLocalStorage()}initCartLocalStorage(){let t=this._getCart();t?this._saveCart(t):this._saveCart([])}addCartItem(t){let e=this._getCart();if(e)if(e.length){let s=e.findIndex(r=>r.product===t.product);if(s===-1)e.push(t),this._saveCart(e);else{let r=e[s];r.quantity=r.quantity+t.quantity,e.splice(s,1,r),this._saveCart(e)}}else e.push(t),this._saveCart(e)}editCartItem(t,e){let s=this._getCart();if(s&&s.length){let r=s.findIndex(c=>c.product===t);r!==-1&&(s[r].quantity=e,this._saveCart(s))}}deleteCartItem(t){let e=this._getCart();if(e&&e.length){let s=e.findIndex(r=>r.product===t);s!==-1&&(e.splice(s,1),this._saveCart(e))}}clearCart(){this._saveCart([])}get cartCount(){return this._cart$.value?this._cart$.value.length:null}_saveCart(t){localStorage.setItem(f,JSON.stringify(t)),this._cart$.next(t)}_getCart(){return JSON.parse(localStorage.getItem(f))}};i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=p({token:i,factory:i.\u0275fac,providedIn:"root"});let o=i;return o})();var F=(()=>{let i=class i{constructor(t,e){this.http=t,this.authService=e,this._filterBy$=new n({categories:[],name:""}),this.filterBy$=this._filterBy$.asObservable(),this._products$=new n({products:[],pageCount:0}),this.products$=this._products$.asObservable(),this._isNgShopProductsLoading$=new n(!1),this.isNgShopProductsLoading$=this._isNgShopProductsLoading$.asObservable(),this.apiUrl=g.API_URL}getProducts({currPage:t,pageSize:e}={}){this.setNgShopProductsLoading(!0);let s=new a;this._filterBy$.value.categories.length&&(s=s.append("categories",this._filterBy$.value.categories.join(","))),this._filterBy$.value.name&&(s=s.append("products",this._filterBy$.value.name)),t&&e&&(s=s.append("currPage",t),s=s.append("pageSize",e)),this.http.get(`${this.apiUrl}products`,{params:s}).pipe(u(1)).subscribe({next:c=>{this._setProducts(c),this.setNgShopProductsLoading(!1)},error:c=>{console.error("err",c)}})}_setProducts(t){this._products$.next(t)}setNgShopProductsLoading(t){this._isNgShopProductsLoading$.next(t)}getProductById(t){return this.http.get(`${this.apiUrl}products/${t}`)}addProduct(t){let e=new a().append("isLoginFast",this.authService.getIsLoginFast());return this.http.post(`${this.apiUrl}products`,t,{params:e})}editProduct(t){let e=new a().append("isLoginFast",this.authService.getIsLoginFast());return this.http.put(`${this.apiUrl}products/${t.get("id")}`,t,{params:e})}editProductGallery(t,e){let s=new a().append("isLoginFast",this.authService.getIsLoginFast());return this.http.put(`${this.apiUrl}products/gallery-images/${e}`,t,{params:s})}deleteProduct(t){let e=new a().append("isLoginFast",this.authService.getIsLoginFast());return this.http.delete(`${this.apiUrl}products/${t}`,{params:e})}getProductsCount(){let t=new a().append("isLoginFast",this.authService.getIsLoginFast());return this.http.get(`${this.apiUrl}products/get/count`,{params:t})}getFeaturedProducts(t){return this.http.get(`${this.apiUrl}products/get/featured/${t}`)}setFilterBy(t){this._filterBy$.next(t)}getProductStatistics(){let t=new a().append("isLoginFast",this.authService.getIsLoginFast());return this.http.get(`${this.apiUrl}products/get/statistics`,{params:t})}};i.\u0275fac=function(e){return new(e||i)(h(d),h(l))},i.\u0275prov=p({token:i,factory:i.\u0275fac,providedIn:"root"});let o=i;return o})();export{v as a,F as b};
